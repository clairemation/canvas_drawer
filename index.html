<!doctype HTML>
<html>

	<head>
	</head>

  <div>
  <b>DRAW ON ME</b>
  </div>
  <div>
    <button type="button" id="SaveButton">Save</button>
  </div>
	<body>
		<canvas id="canvas" width=512 height=512>
	</body>

	<script>
		var canvas = document.getElementById("canvas");
    var saveButton = document.getElementById("SaveButton").onclick = save;
		var ctx = canvas.getContext("2d");
		ctx.fillStyle = "red";

		function drawDot(posX, posY){
			ctx.beginPath();
			ctx.arc(posX, posY, 4, 0, 2 * Math.PI);
			ctx.fill();
		}

    function save(){
      var img = canvas.toDataURL("image/png");
      document.write(
        `<a download="canvasPic.png" href="` + img + `">
            <img src="` + img + `"/ />
        </a>`
      );
  }

		var mouseDown = false;
    var touchDown = false;

    canvas.addEventListener("touchstart", function(e){
      touchDown = true;
    });

    canvas.addEventListener("touchend", function(e){
      touchDown = false;
    });

		canvas.addEventListener("mousedown", function(e){
      drawDot(e.clientX, e.clientY);
			mouseDown = true;
		});

		canvas.addEventListener("mouseup", function(e){
			mouseDown = false;
		});

		canvas.addEventListener("mousemove", function(e){
			if (mouseDown){
				drawDot(e.clientX, e.clientY);
			}
		});

    canvas.addEventListener("touchmove", function(e){
      if(touchDown){
        drawDot(e.clientX, e.clientY);
      }
    });

	</script>

</html>
